Revert to commit f772d29: Reverting changes from that commit and afterward.

This commit is a non-destructive revert of all changes made after commit f772d29...