---
type: credential-master-list
decision: DECISION_168
date: 2026-02-26
version: 1.1.0
---

# Master Credentials List - ALMA QMD Railway Deployment

## Quick Reference: All Credentials by System

| System | Credential | Vault Key | Source | Timing |
|--------|------------|-----------|--------|--------|
| **Vault** | Encryption Key | `ALMA_SECRETS_KEY_B64` (env) | You generate | First |
| **OpenClaw** | Setup Password | `railway.openclaw.setup_password` | You generate | Pre-deploy |
| **OpenClaw** | Gateway Token | `railway.openclaw.gateway_token` | You generate | Pre-deploy |
| **Claude CLI** | Setup Key | `claude.setup_key` | `claude setup` | Pre-deploy |
| **Telegram** | Bot Token | `telegram.bot.token` | @BotFather | Pre-deploy |
| **Telegram** | Webhook Secret | `telegram.webhook.secret` | You generate | Pre-deploy |
| **Ollama** | API Key | `ollama.api_key` | Hardcoded | N/A |
| **SFTPGo** | Operator Public Key | `sftpgo.operator.public_key` | Generate after vault | Post-vault |
| **SFTPGo** | Host Key Fingerprint | `sftpgo.hostkey.fingerprint_sha256` | First deploy | Post-deploy |
| **MongoDB** | Connection URL | `railway.mongodb.mongo_url` | Railway template | Post-deploy |
| **Railway** | Service Domain | `railway.service.domain` | Railway | Post-deploy |

---

## 1. Secrets Vault (Foundation)

### ALMA_SECRETS_KEY_B64

| Attribute | Value |
|-----------|-------|
| **Purpose** | Encrypt/decrypt the secrets store |
| **Format** | Base64-encoded 32 random bytes (44 chars) |
| **Generated By** | You |
| **Storage** | Environment variable ONLY |
| **Never** | Commit to git, store in vault, share |

**Generation**:
```powershell
# PowerShell
$keyBytes = New-Object byte[] 32
[Security.Cryptography.RandomNumberGenerator]::Create().GetBytes($keyBytes)
$key = [Convert]::ToBase64String($keyBytes)
$env:ALMA_SECRETS_KEY_B64 = $key
Write-Host "SAVE THIS SECURELY: $key"
```

**Verification**:
```powershell
# Test vault access
alma-secrets list
```

---

## 2. OpenClaw Credentials

### 2.1 Setup Password

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `railway.openclaw.setup_password` |
| **Railway Var** | `SETUP_PASSWORD` |
| **Purpose** | Gate the initial setup wizard |
| **Format** | String, 24+ characters |
| **Generated By** | You or `alma-secrets` |

**Generation**:
```powershell
alma-secrets set railway.openclaw.setup_password --generate --length 24
```

### 2.2 Gateway Token

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `railway.openclaw.gateway_token` |
| **Railway Var** | `OPENCLAW_GATEWAY_TOKEN` |
| **Purpose** | Control UI authentication |
| **Format** | String, 32+ characters |
| **Generated By** | You or `alma-secrets` |

**Generation**:
```powershell
alma-secrets set railway.openclaw.gateway_token --generate --length 32
```

---

## 3. Claude CLI Credentials

### 3.1 Setup Key

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `claude.setup_key` |
| **Railway Var** | `CLAUDE_SETUP_KEY` |
| **Purpose** | Claude CLI (`claude setup`) authentication |
| **Format** | Setup key from `claude setup` command |
| **Source** | Claude CLI initialization |

**Steps to Obtain**:
1. Install Claude CLI: `npm install -g @anthropic-ai/claude-cli`
2. Run: `claude setup`
3. Follow authentication flow
4. Copy setup key when provided
5. **Note**: This is for CLI setup, not API access

**Storage**:
```powershell
alma-secrets set claude.setup_key --value "your-setup-key-here"
```

**Usage**:
```bash
# In container entrypoint or setup script
claude setup --key "$CLAUDE_SETUP_KEY"
```

---

## 4. Telegram Credentials

### 4.1 Bot Token

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `telegram.bot.token` |
| **Railway Var** | `TELEGRAM_BOT_TOKEN` |
| **Purpose** | Bot authentication with Telegram API |
| **Format** | `123456789:ABCdefGHIjklMNOpqrsTUVwxyz` |
| **Source** | @BotFather on Telegram |

**Steps to Obtain**:
1. Open Telegram
2. Message [@BotFather](https://t.me/botfather)
3. Send `/newbot`
4. Follow prompts:
   - Name: "ALMA Assistant" (display name)
   - Username: `alma_yourname_bot` (must end in _bot, unique)
5. Receive token: `123456789:ABCdef...`
6. **Save token immediately** (BotFather shows it once)

**Storage**:
```powershell
alma-secrets set telegram.bot.token --value "123456789:ABCdef..."
```

### 4.2 Webhook Secret

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `telegram.webhook.secret` |
| **Railway Var** | `TELEGRAM_WEBHOOK_SECRET` |
| **Purpose** | Verify webhook requests from Telegram |
| **Format** | String, 32+ characters |
| **Generated By** | You or `alma-secrets` |

**Generation**:
```powershell
alma-secrets set telegram.webhook.secret --generate --length 32
```

**Webhook URL** (after deploy):
```
https://your-railway-domain.up.railway.app/webhook/telegram
```

---

## 5. Ollama Configuration

### 5.1 API Key

| Attribute | Value |
|-----------|-------|
| **Vault Key** | N/A (hardcoded) |
| **Railway Var** | `OLLAMA_API_KEY` |
| **Value** | `ollama-local` |
| **Purpose** | Enable Ollama provider (any non-empty value works) |

**Note**: Ollama is local; this "key" just enables the provider in OpenClaw.

---

## 6. SFTPGo Credentials

### 6.1 Operator SSH Public Key

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `sftpgo.operator.public_key` |
| **Railway Var** | `SFTPGO_OPERATOR_KEY` |
| **Purpose** | SSH key-only authentication |
| **Format** | SSH public key (ed25519 recommended) |
| **Generated By** | Generated after vault ready |

**Generation** (after vault initialized):
```powershell
# Generate new keypair
ssh-keygen -t ed25519 -C "alma-operator@railway" -f ~/.ssh/alma-operator

# Store public key
alma-secrets set sftpgo.operator.public_key --value (Get-Content ~/.ssh/alma-operator.pub)

# Keep private key local: ~/.ssh/alma-operator
```

### 6.2 Host Key Fingerprint

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `sftpgo.hostkey.fingerprint_sha256` |
| **Purpose** | Verify SFTP server identity |
| **Format** | SHA256 fingerprint |
| **Captured** | After first deploy |

**Capture** (post-deploy):
```powershell
# Get from Railway
$tcpEndpoint = railway tcp-proxy get --service "alma-qmd" --port 2022
$host = $tcpEndpoint.Split(':')[0]
$port = $tcpEndpoint.Split(':')[1]

# Get fingerprint
$fp = ssh-keyscan -p $port $host 2>$null | ssh-keygen -lf -
alma-secrets set sftpgo.hostkey.fingerprint_sha256 --value $fp
```

---

## 7. MongoDB Credentials

### 7.1 Connection URL

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `railway.mongodb.mongo_url` |
| **Railway Var** | `MONGO_URL` (auto-generated) |
| **Purpose** | Database connection |
| **Format** | MongoDB connection string |
| **Source** | Railway MongoDB template |
| **Captured** | Post-deploy |

**Capture** (post-deploy):
```powershell
$mongoUrl = railway variables get MONGO_URL --service "alma-qmd"
alma-secrets set railway.mongodb.mongo_url --value $mongoUrl
```

---

## 8. Railway Service Info

### 8.1 Service Domain

| Attribute | Value |
|-----------|-------|
| **Vault Key** | `railway.service.domain` |
| **Purpose** | Public HTTPS endpoint |
| **Format** | URL |
| **Source** | Railway |
| **Captured** | Post-deploy |

**Capture** (post-deploy):
```powershell
$domain = railway domain --service "alma-qmd"
alma-secrets set railway.service.domain --value $domain
```

---

## Credential Sequence

### Phase 1: Vault Initialization (First)
```powershell
# 1. Generate vault key
$key = [Convert]::ToBase64String((1..32 | ForEach-Object { Get-Random -Maximum 256 } | ForEach-Object { [byte]$_ }))
$env:ALMA_SECRETS_KEY_B64 = $key
# SAVE KEY SECURELY (password manager)

# 2. Initialize vault
alma-secrets init
```

### Phase 2: Pre-Deploy Credentials (Before Railway Deploy)
```powershell
# OpenClaw
alma-secrets set railway.openclaw.setup_password --generate --length 24
alma-secrets set railway.openclaw.gateway_token --generate --length 32

# Claude CLI setup key
alma-secrets set claude.setup_key --value "your-claude-setup-key"

# Telegram (get from @BotFather first)
alma-secrets set telegram.bot.token --value "123456789:..."
alma-secrets set telegram.webhook.secret --generate --length 32
```

### Phase 3: Post-Vault, Pre-Deploy
```powershell
# Generate SSH keypair
ssh-keygen -t ed25519 -C "alma-operator@railway" -f ~/.ssh/alma-operator
alma-secrets set sftpgo.operator.public_key --value (Get-Content ~/.ssh/alma-operator.pub)
# Keep ~/.ssh/alma-operator private key locally
```

### Phase 4: Post-Deploy (After Railway Deploy)
```powershell
# Capture from Railway
alma-secrets set railway.mongodb.mongo_url --value (railway variables get MONGO_URL)
alma-secrets set railway.service.domain --value (railway domain)

# Capture SFTP fingerprint
$tcp = railway tcp-proxy get --service "alma-qmd" --port 2022
$fp = ssh-keyscan -p 2022 $tcp.Split(':')[0] 2>$null | ssh-keygen -lf -
alma-secrets set sftpgo.hostkey.fingerprint_sha256 --value $fp
```

---

## Railway Environment Variables Summary

| Variable Name | Source | Command to Set |
|---------------|--------|----------------|
| `SETUP_PASSWORD` | Vault | `railway variables set SETUP_PASSWORD $(alma-secrets get railway.openclaw.setup_password)` |
| `OPENCLAW_GATEWAY_TOKEN` | Vault | `railway variables set OPENCLAW_GATEWAY_TOKEN $(alma-secrets get railway.openclaw.gateway_token)` |
| `CLAUDE_SETUP_KEY` | Vault | `railway variables set CLAUDE_SETUP_KEY $(alma-secrets get claude.setup_key)` |
| `TELEGRAM_BOT_TOKEN` | Vault | `railway variables set TELEGRAM_BOT_TOKEN $(alma-secrets get telegram.bot.token)` |
| `TELEGRAM_WEBHOOK_SECRET` | Vault | `railway variables set TELEGRAM_WEBHOOK_SECRET $(alma-secrets get telegram.webhook.secret)` |
| `OLLAMA_API_KEY` | Hardcoded | `railway variables set OLLAMA_API_KEY "ollama-local"` |
| `SFTPGO_OPERATOR_KEY` | Vault | `railway variables set SFTPGO_OPERATOR_KEY $(alma-secrets get sftpgo.operator.public_key)` |
| `MONGO_URL` | Railway | Auto-generated by MongoDB template |

---

## Verification Commands

```powershell
# Verify all pre-deploy credentials exist
alma-secrets get railway.openclaw.setup_password
alma-secrets get railway.openclaw.gateway_token
alma-secrets get claude.setup_key
alma-secrets get telegram.bot.token
alma-secrets get telegram.webhook.secret

# Verify SSH keypair exists
Test-Path ~/.ssh/alma-operator
Test-Path ~/.ssh/alma-operator.pub

# List all vault keys
alma-secrets list

# Verify Railway variables
railway variables --service "alma-qmd"
```

---

## Security Checklist

- [ ] `ALMA_SECRETS_KEY_B64` stored in password manager (not vault)
- [ ] SSH private key (`~/.ssh/alma-operator`) backed up securely
- [ ] No credentials committed to git
- [ ] Claude CLI setup key obtained from `claude setup`
- [ ] Telegram bot token not shared
- [ ] All vault keys use `--generate` where possible
- [ ] Railway variables verified after each set
